<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <meta property="article:modified_time" content="2022-10-17T16:56:32-05:00" /><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Signal Logging (Streaming)" href="streaming.html" /><link rel="prev" title="Signal Logging" href="index.html" />

    <link rel="shortcut icon" href="../../../_static/favicon.png"/><meta name="generator" content="sphinx-4.3.1, furo 2021.11.23"/>
        <title>Signal Logging (Buffered) - AMDC Platform</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=7f0192ddeb2adecfbaa87ffbcf67d16358b30bc1" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">AMDC Platform</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">AMDC Platform</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">GitHub Repositories</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Severson-Group/AMDC-Hardware">AMDC-Hardware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Severson-Group/AMDC-Firmware">AMDC-Firmware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../onboarding.html">Onboarding</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/meet-amdc/index.html">Meet the AMDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/blink/index.html">Blink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/hw-commands/index.html">Hardware Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/vsi/index.html">Voltage Source Inverter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/profiling-tasks/index.html">Profiling Tasks</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">User Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../host-interface/index.html">Host Interface</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../host-interface/python-wrapper.html">Python Wrapper</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Signal Logging</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Buffered</a></li>
<li class="toctree-l3"><a class="reference internal" href="streaming.html">Streaming</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../injection/index.html">Signal Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code-profiling.html">Code Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../amds-interface.html">AMDS Interface</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/index.html">Hardware Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/obtaining-hardware.html">Obtaining Hardware</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../hardware/subsystems/index.html">Subsystems</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/picozed.html">PicoZed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/analog.html">Analog Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/encoder.html">Encoder Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/power-distribution.html">Power Distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/power-stack.html">Power Stack Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/expansion-port.html">Expansion Port</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../hardware/revisions/index.html">PCB Revisions</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/revisions/firmware-upgrades-per-hardware-target.html">Firmware Upgrades Per Hardware Target</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../hardware/revisions/rev-d/index.html">REV D Hardware</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-d/rev-d-bring-up.html">REV D Bring-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-d/rev-d-errata.html">REV D Errata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-d/rev-d-pin-mapping.html">REV D Pin Mapping</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../hardware/revisions/rev-e/index.html">REV E Hardware</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-e/rev-e-bring-up.html">REV E Bring-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-e/rev-e-pin-mapping.html">REV E Pin Mapping</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Firmware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware/index.html">Firmware Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware/development/index.html">Development</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../firmware/arch/index.html">Architecture</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/arch/drivers.html">Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/arch/system.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/arch/user-apps.html">User Apps</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../firmware/xilinx-tools/index.html">Xilinx Tools</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/installing-xilinx-tools.html">Installing Xilinx Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/building-and-running-firmware.html">Building and Running Firmware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/flashing.html">Flashing AMDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/create-private-repo.html">Create Private Repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/create-user-app.html">Create Custom User App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/dual-core.html">Dual Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/low-level-debugging.html">Low-Level Debugging</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Accessories</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../accessories/amds/index.html">AMDS</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../accessories/amds/amds-in-action/index.html">AMDS in Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../accessories/amds/firmware/index.html">Firmware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../accessories/amds/mainboard/index.html">Mainboard</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../accessories/amds/sensor-cards/index.html">Sensor Cards</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../accessories/amds/sensor-cards/high-voltage/index.html">High Voltage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../accessories/amds/sensor-cards/low-voltage/index.html">Low Voltage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../accessories/amds/sensor-cards/current/index.html">Current</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../accessories/uinverter/index.html">uInverter</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../accessories/uinverter/hardware-design.html">Hardware Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../accessories/uinverter/connections.html">Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../accessories/uinverter/rl-est/index.html">RL Estimation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../accessories/dac/index.html">DAC</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../accessories/dac/pcb-electrical-tests.html">PCB Electrical Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../accessories/test-board/index.html">TestBoard</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="signal-logging-buffered">
<h1>Signal Logging (Buffered)<a class="headerlink" href="#signal-logging-buffered" title="Permalink to this headline">¶</a></h1>
<p>This document explains how to use the buffered logging features in the firmware.</p>
<p>The instructions pick up where the <a class="reference internal" href="index.html"><span class="doc std std-doc">Signal Logging</span></a> document left off.
Before starting the instructions below, make sure you have completed the common logging steps described in <a class="reference internal" href="index.html"><span class="doc std std-doc">Signal Logging</span></a>.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The buffered logging instructions below assume you have already:</p>
<ol class="simple">
<li><p>Instrumented your C-code for logging</p></li>
<li><p>Registered the variables via the Python logging class</p></li>
</ol>
</div>
<section id="python-interface-for-buffered-logging">
<h2>Python Interface for Buffered Logging<a class="headerlink" href="#python-interface-for-buffered-logging" title="Permalink to this headline">¶</a></h2>
<section id="empty-logged-variables">
<h3>1. Empty logged variables:<a class="headerlink" href="#empty-logged-variables" title="Permalink to this headline">¶</a></h3>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">empty_all</span><span class="p">()</span>
</pre></div>
</div>
<p>Empties the log of any old data to prepare for collecting new data.
If you do not do this, the logger will simply append new data to the old data.
This does <em>not</em> unregister variables, only empties them.</p>
<p>To empty a single variable:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="start-logging">
<h3>2. Start logging:<a class="headerlink" href="#start-logging" title="Permalink to this headline">¶</a></h3>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>Begins sampling the registered variables at the requested sample rate, and writing the values to the internal memory buffer.</p>
</section>
<section id="stop-logging">
<h3>3. Stop logging:<a class="headerlink" href="#stop-logging" title="Permalink to this headline">¶</a></h3>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<p>Stops sampling the registered variables.</p>
<p>Typically, you will want to record an event or record data for a set amount of time.
The following example illustrates a common use case:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">empty_all</span><span class="p">()</span>
<span class="n">logger</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Tell your controller to do something cool</span>
<span class="n">do_something_cool</span><span class="p">()</span>

<span class="c1"># Record data for 1 second after the cool event</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">logger</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="log-for-set-duration">
<h3>4. Log for set duration:<a class="headerlink" href="#log-for-set-duration" title="Permalink to this headline">¶</a></h3>
<p>If you just want to start logging, wait for a few seconds, and stop logging:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Record data for about half second</span>
<span class="n">logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">duration</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>The above is exactly equivalent to</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<p>This is often used to record steady-state operation of the control system.</p>
</section>
<section id="dump-data">
<h3>5. Dump data:<a class="headerlink" href="#dump-data" title="Permalink to this headline">¶</a></h3>
<p>After collecting data (and stopping the logging process), transfer the data to the host:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">dump</span><span class="p">()</span>
</pre></div>
</div>
<p>The output of the <code class="docutils literal notranslate"><span class="pre">dump()</span></code> method is a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> object.
<code class="docutils literal notranslate"><span class="pre">pandas</span></code> is a popular data science library in Python and a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is the primary object that <code class="docutils literal notranslate"><span class="pre">pandas</span></code> works with.
Think of a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> like an Excel spreadsheet.
The columns of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> correspond to each logged variable and the index of the dataframe is time.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Invest your time in learning how <code class="docutils literal notranslate"><span class="pre">pandas</span></code> works.
This cannot be stressed enough.
Pandas is very powerful and can make analyzing the logged data much faster and easier.</p>
<p>Make sure you understand how <code class="docutils literal notranslate"><span class="pre">pandas</span></code> stores data, and ensure you can easily manipulate, process, and view the data.</p>
<p>There is an insane amount of resources available to learn <code class="docutils literal notranslate"><span class="pre">pandas</span></code> – consider starting <a class="reference external" href="https://pandas.pydata.org/docs/getting_started/intro_tutorials/index.html">here</a>.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">dump()</span></code> function is powerful and has a lot of optional arguments.
By default, <code class="docutils literal notranslate"><span class="pre">dump()</span></code> will dump out all logged variables.</p>
<p>Depending on the amount of data, this can be time consuming.
Instead, you can also specifiy a subset of variables to dump as follows:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">log_vars</span> <span class="o">=</span> <span class="s1">'foo bar'</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also specify a file path and <code class="docutils literal notranslate"><span class="pre">dump()</span></code> will automatically save your data to a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file.
This is nice to make sure your data persists between experiments.
By default, the <code class="docutils literal notranslate"><span class="pre">dump()</span></code> function appends a timestamp to your file name so that it does not overwrite prior data.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">log_vars</span> <span class="o">=</span> <span class="s1">'foo bar'</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="s1">'my_data.csv'</span><span class="p">)</span>
</pre></div>
</div>
<p>Comments can be added to the output CSV file using the optional <code class="docutils literal notranslate"><span class="pre">comment</span></code> parameter:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span>
    <span class="n">log_vars</span> <span class="o">=</span> <span class="s1">'foo bar'</span><span class="p">,</span>
    <span class="n">file</span> <span class="o">=</span> <span class="s1">'my_data.csv'</span><span class="p">,</span>
    <span class="n">comment</span> <span class="o">=</span> <span class="s1">'the motor appeared to run smooth'</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="load-back-prior-logged-data">
<h3>6. Load back prior logged data:<a class="headerlink" href="#load-back-prior-logged-data" title="Permalink to this headline">¶</a></h3>
<p>To load in a previous logged CSV data file:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">'old_data_file.csv'</span><span class="p">)</span>
</pre></div>
</div>
<p>This will load your old data run into a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.
The load function is just a thin wrapper around the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> <code class="docutils literal notranslate"><span class="pre">read_csv()</span></code> method and the above line of code is equivalent to:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'old_data_file.csv'</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="s1">'#'</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="s1">'t'</span><span class="p">)</span>
</pre></div>
</div>
<p>Loading the data this way sets time to be the index of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and ignores any comments you may have stored with the data.</p>
</section>
<section id="plot-data">
<h3>7. Plot data:<a class="headerlink" href="#plot-data" title="Permalink to this headline">¶</a></h3>
<p>Now that your data is in a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, you can post-process it however you wish.
As motivation for why the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is so powerful for logging and debugging, consider this example.</p>
<p>Imagine we have recorded (x,y,z) position data from displacement sensors as <code class="docutils literal notranslate"><span class="pre">pos_x</span></code>, <code class="docutils literal notranslate"><span class="pre">pos_y</span></code>, and <code class="docutils literal notranslate"><span class="pre">pos_z</span></code>, as well as measured three phase currents <code class="docutils literal notranslate"><span class="pre">I_a</span></code>, <code class="docutils literal notranslate"><span class="pre">I_b</span></code>, and <code class="docutils literal notranslate"><span class="pre">I_c</span></code>.
We can extract all of the data into a single dataframe <code class="docutils literal notranslate"><span class="pre">df</span></code> and save the data as follows:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">file</span> <span class="o">=</span> <span class="s1">'sensed_values.csv'</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s make two quick plots: positions and currents:</p>
<ol class="simple">
<li><p>Plot the first 100 ms of position data, and add a marker so we can see each sampled value.
We want to plot the positions in micrometers, but the data is stored in meters.</p></li>
<li><p>Make a similar plot for the currents, with the same time window and marker.</p></li>
</ol>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convert position data from meters to um</span>
<span class="n">gain_m_to_um</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mf">1e6</span>

<span class="n">t0</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># [sec]</span>
<span class="n">t1</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c1"># [sec]</span>

<span class="n">marker</span> <span class="o">=</span> <span class="s1">'.'</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">t0</span><span class="p">:</span><span class="n">t1</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s2">"pos_"</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">gain_m_to_um</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Position (um)"</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">t0</span><span class="p">:</span><span class="n">t1</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s2">"I_"</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Current (A)"</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="copy-paste-example">
<h2>Copy-Paste Example<a class="headerlink" href="#copy-paste-example" title="Permalink to this headline">¶</a></h2>
<p>The following Python script example shows the full flow of buffered logging on the AMDC.
Users should copy and paste this script to get started.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example assumes UART physical link to the AMDC.
Modify the setup portion for Ethernet via the instructions <a class="reference internal" href="../host-interface/python-wrapper.html"><span class="doc std std-doc">here</span></a>.</p>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># CHANGE THIS TO YOUR REPO DIRECTORY</span>
<span class="n">repo_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">'C:/my/example/path'</span>

<span class="c1"># CHANGE THIS TO YOUR AMDC PORT NUMBER</span>
<span class="n">uart_port</span> <span class="o">=</span> <span class="s1">'COM1'</span>

<span class="c1"># SET THIS TO PATH OF YOUR USER APPLICATION CODE</span>
<span class="n">user_app_c_code_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">'C:/my/example/path/my_c_code'</span>

<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pathlib</span> <span class="k">as</span> <span class="nn">pl</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">repo_dir</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">)</span>
<span class="n">scripts_folder</span> <span class="o">=</span> <span class="n">repo_dir</span> <span class="o">/</span> <span class="s1">'AMDC-Firmware'</span> <span class="o">/</span> <span class="s1">'scripts'</span>  
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">scripts_folder</span><span class="p">))</span>

<span class="kn">from</span> <span class="nn">AMDC</span> <span class="kn">import</span> <span class="n">AMDC</span>
<span class="kn">from</span> <span class="nn">AMDC_Logger</span> <span class="kn">import</span> <span class="n">AMDC_Logger</span><span class="p">,</span> <span class="n">find_mapfile</span>

<span class="c1">####################</span>
<span class="c1"># SETUP LOGGER</span>
<span class="c1">####################</span>

<span class="n">amdc</span> <span class="o">=</span> <span class="n">AMDC</span><span class="p">()</span>
<span class="n">amdc</span><span class="o">.</span><span class="n">setup_comm_defaults</span><span class="p">(</span><span class="s1">'uart'</span><span class="p">)</span>
<span class="n">amdc</span><span class="o">.</span><span class="n">uart_init</span><span class="p">(</span><span class="n">uart_port</span><span class="p">)</span>
<span class="n">amdc</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="n">mapfile_path</span> <span class="o">=</span> <span class="n">find_mapfile</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">AMDC_Logger</span><span class="p">(</span><span class="n">AMDC</span> <span class="o">=</span> <span class="n">amdc</span><span class="p">,</span> <span class="n">mapfile</span> <span class="o">=</span> <span class="n">mapfile_path</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">sync</span><span class="p">()</span>

<span class="c1">####################</span>
<span class="c1"># REGISTER VARIABLES</span>
<span class="c1">####################</span>

<span class="n">logger</span><span class="o">.</span><span class="n">auto_register</span><span class="p">(</span><span class="n">user_app_c_code_path</span><span class="p">)</span>

<span class="c1"># View which variables are logged</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>

<span class="c1">####################</span>
<span class="c1"># COLLECT DATA</span>
<span class="c1">####################</span>

<span class="c1"># Empty the logger, then record data</span>
<span class="n">logger</span><span class="o">.</span><span class="n">empty_all</span><span class="p">()</span> 
<span class="n">logger</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># DATA IS BEING RECORDED</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">logger</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1">####################</span>
<span class="c1"># DUMP DATA AND PLOT</span>
<span class="c1">####################</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">file</span> <span class="o">=</span> <span class="s1">'test_data.csv'</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For a Jupyter notebook environment, put each section of the code in its own cell so you can run the code in pieces.</p>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        

        <div class="related-pages">
          <a class="next-page" href="streaming.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Signal Logging (Streaming)</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Signal Logging</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Severson Research Group |
            Last updated on Oct 17, 2022. |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../../../_sources/getting-started/user-guide/logging/buffered.md.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-74WCSDC0D0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-74WCSDC0D0');
</script>

<div class="google-analytics-tracking-info">
This page uses <a href="https://analytics.google.com/">Google Analytics</a> to collect statistics. Disable by blocking JavaScript from www.google-analytics.com.
</div>


      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Signal Logging (Buffered)</a><ul>
<li><a class="reference internal" href="#python-interface-for-buffered-logging">Python Interface for Buffered Logging</a><ul>
<li><a class="reference internal" href="#empty-logged-variables">1. Empty logged variables:</a></li>
<li><a class="reference internal" href="#start-logging">2. Start logging:</a></li>
<li><a class="reference internal" href="#stop-logging">3. Stop logging:</a></li>
<li><a class="reference internal" href="#log-for-set-duration">4. Log for set duration:</a></li>
<li><a class="reference internal" href="#dump-data">5. Dump data:</a></li>
<li><a class="reference internal" href="#load-back-prior-logged-data">6. Load back prior logged data:</a></li>
<li><a class="reference internal" href="#plot-data">7. Plot data:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copy-paste-example">Copy-Paste Example</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    </body>
</html>