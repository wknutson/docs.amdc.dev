<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <meta property="article:modified_time" content="2023-01-04T08:55:56-06:00" /><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Sensor Cards" href="../sensor-cards/index.html" /><link rel="prev" title="Firmware" href="../firmware/index.html" />

    <link rel="shortcut icon" href="../../../_static/favicon.png"/><meta name="generator" content="sphinx-4.3.1, furo 2021.11.23"/>
        <title>Mainboard - AMDC Platform</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=7f0192ddeb2adecfbaa87ffbcf67d16358b30bc1" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">AMDC Platform</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">AMDC Platform</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">GitHub Repositories</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Severson-Group/AMDC-Hardware">AMDC-Hardware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Severson-Group/AMDC-Firmware">AMDC-Firmware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started/onboarding.html">Onboarding</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../getting-started/tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/tutorials/meet-amdc/index.html">Meet the AMDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/tutorials/blink/index.html">Blink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/tutorials/hw-commands/index.html">Hardware Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/tutorials/vsi/index.html">Voltage Source Inverter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/tutorials/profiling-tasks/index.html">Profiling Tasks</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../getting-started/user-guide/index.html">User Guide</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../getting-started/user-guide/host-interface/index.html">Host Interface</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/user-guide/host-interface/python-wrapper.html">Python Wrapper</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../getting-started/user-guide/logging/index.html">Signal Logging</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/user-guide/logging/buffered.html">Buffered</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/user-guide/logging/streaming.html">Streaming</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/user-guide/injection/index.html">Signal Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/user-guide/code-profiling.html">Code Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/user-guide/amds-interface.html">AMDS Interface</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/index.html">Hardware Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/obtaining-hardware.html">Obtaining Hardware</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../hardware/subsystems/index.html">Subsystems</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/picozed.html">PicoZed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/analog.html">Analog Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/encoder.html">Encoder Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/power-distribution.html">Power Distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/power-stack.html">Power Stack Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/subsystems/expansion-port.html">Expansion Port</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../hardware/revisions/index.html">PCB Revisions</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/revisions/firmware-upgrades-per-hardware-target.html">Firmware Upgrades Per Hardware Target</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../hardware/revisions/rev-d/index.html">REV D Hardware</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-d/rev-d-bring-up.html">REV D Bring-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-d/rev-d-errata.html">REV D Errata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-d/rev-d-pin-mapping.html">REV D Pin Mapping</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../hardware/revisions/rev-e/index.html">REV E Hardware</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-e/rev-e-bring-up.html">REV E Bring-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hardware/revisions/rev-e/rev-e-pin-mapping.html">REV E Pin Mapping</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Firmware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware/index.html">Firmware Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware/development/index.html">Development</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../firmware/arch/index.html">Architecture</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/arch/drivers.html">Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/arch/system.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/arch/user-apps.html">User Apps</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../firmware/xilinx-tools/index.html">Xilinx Tools</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/installing-xilinx-tools.html">Installing Xilinx Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/building-and-running-firmware.html">Building and Running Firmware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/flashing.html">Flashing AMDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/create-private-repo.html">Create Private Repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/create-user-app.html">Create Custom User App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/dual-core.html">Dual Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../firmware/xilinx-tools/low-level-debugging.html">Low-Level Debugging</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Accessories</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">AMDS</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../amds-in-action/index.html">AMDS in Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware/index.html">Firmware</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Mainboard</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sensor-cards/index.html">Sensor Cards</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../sensor-cards/high-voltage/index.html">High Voltage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sensor-cards/low-voltage/index.html">Low Voltage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sensor-cards/current/index.html">Current</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../uinverter/index.html">uInverter</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../uinverter/hardware-design.html">Hardware Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../uinverter/connections.html">Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../uinverter/rl-est/index.html">RL Estimation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dac/index.html">DAC</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dac/pcb-electrical-tests.html">PCB Electrical Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../test-board/index.html">TestBoard</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="mainboard">
<h1>Mainboard<a class="headerlink" href="#mainboard" title="Permalink to this headline">¶</a></h1>
<p>This document describes the design consideration, implementation details, and board interface details for the sensor mainboard. A block diagram is presented and each component is discussed in detail.</p>
<section id="relevant-hardware-versions">
<h2>Relevant Hardware Versions<a class="headerlink" href="#relevant-hardware-versions" title="Permalink to this headline">¶</a></h2>
<p>REVD</p>
</section>
<section id="application-purpose">
<h2>Application / Purpose<a class="headerlink" href="#application-purpose" title="Permalink to this headline">¶</a></h2>
<p>The mainboard is specifically designed to interface directly to the <a class="reference internal" href="../../../hardware/subsystems/expansion-port.html"><span class="doc std std-doc">GPIO expansion port on the AMDC</span></a>.</p>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Can connect up to 8 sensor daughter cards.</p></li>
<li><p>Can communicate with an external controller (like AMDC). An external controller can obtain the measurement results and also is allowed to control the digital conversion process.</p></li>
<li><p>Robust differential IO communication is used to transmit sensor data to an external controller.</p></li>
<li><p>High throughput of up to 1 MSPS (depending on ADC device on daughter cards).</p></li>
</ul>
</section>
<section id="block-diagram-and-spi-connection-configuration">
<h2>Block Diagram and SPI Connection Configuration<a class="headerlink" href="#block-diagram-and-spi-connection-configuration" title="Permalink to this headline">¶</a></h2>
<p>The eight daughter cards (DC) transmit data to the STM32 MCU using standard SPI protocol. The daughter cards are grouped into four pairs of daisy chain connections. See the following block diagram.</p>
<p><img alt="" src="../../../_images/Measurementboard_REVD.svg"/></p>
<p><img alt="" src="../../../_images/Motherboard_3d.png"/></p>
<p>The daughter cards can be connected in daisy chain pair configuration (D) or single SPI configuration (S). The daisy chain configuration will have a throughput of 500 kSPS. If the number of daughter cards is less than or equal to four, then a single SPI configuration can be used to get higher throughput. This single SPI configuration will have a throughput of 1 MSPS. The configuration can be changed using jumpers (P9, P10, P15, P16) as shown in the following figure.</p>
<p><img alt="" src="../../../_images/Jumper_modes.png"/></p>
</section>
<section id="external-connections">
<h2>External Connections<a class="headerlink" href="#external-connections" title="Permalink to this headline">¶</a></h2>
<p>There are two interfacing DB-15 connectors on the measurement board. The first connector is used for interfacing with the external controller via isoSPI and differential IO communication. The second connector is intended as an expansion port connection, which is connected to the GPIO port of the MCU.</p>
<section id="db15-connector-1-isospi-and-differential-io">
<h3>DB15 Connector 1: IsoSPI and Differential IO<a class="headerlink" href="#db15-connector-1-isospi-and-differential-io" title="Permalink to this headline">¶</a></h3>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin number</p></th>
<th class="head"><p>Signal name</p></th>
<th class="head"><p>Voltage level</p></th>
<th class="head"><p>Protocol</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>5V_IN</p></td>
<td><p>5V</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>D2_I_P</p></td>
<td><p>5V</p></td>
<td><p>Differential IO</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>D2_I_N</p></td>
<td><p>5V</p></td>
<td><p>Differential IO</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>D3_I_P</p></td>
<td><p>5V</p></td>
<td><p>Differential IO</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>D3_I_N</p></td>
<td><p>5V</p></td>
<td><p>Differential IO</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>NC</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>isoSPI2_P</p></td>
<td><p>5V</p></td>
<td><p>IsoSPI</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>isoSPI2_N</p></td>
<td><p>5V</p></td>
<td><p>IsoSPI</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>isoSPI3_P</p></td>
<td><p>5V</p></td>
<td><p>IsoSPI</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>isoSPI3_N</p></td>
<td><p>5V</p></td>
<td><p>IsoSPI</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>GND</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>D2_O_P</p></td>
<td><p>5V</p></td>
<td><p>Differential IO</p></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>D2_O_N</p></td>
<td><p>5V</p></td>
<td><p>Differential IO</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>D3_O_P</p></td>
<td><p>5V</p></td>
<td><p>Differential IO</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>D3_O_N</p></td>
<td><p>5V</p></td>
<td><p>Differential IO</p></td>
</tr>
</tbody>
</table></div>
</section>
<section id="db15-connector-2-gpio">
<h3>DB15 Connector 2: GPIO<a class="headerlink" href="#db15-connector-2-gpio" title="Permalink to this headline">¶</a></h3>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin number</p></th>
<th class="head"><p>Signal name</p></th>
<th class="head"><p>Voltage level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>3V3</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>GPIO_1</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>GPIO_2</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>GPIO_3</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>GPIO_4</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>GPIO_5</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>GPIO_6</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>GPIO_7</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>GPIO_8</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>GPIO_9</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>GPIO_10</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>GPIO_11</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>GPIO_12</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>GND</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>GND</p></td>
<td><p>-</p></td>
</tr>
</tbody>
</table></div>
<p>Implementation details of <a class="reference external" href="#IsoSPI-Communication-Interface">IsoSPI</a> and <a class="reference external" href="#Differential-IO-Isolated-Transceiver">Differential IO</a> is described later in the document.</p>
</section>
</section>
<section id="systems-on-board">
<h2>Systems on Board<a class="headerlink" href="#systems-on-board" title="Permalink to this headline">¶</a></h2>
<p>Per the block diagram above, the mainboard is made of several systems, as explained below.</p>
<section id="stm32f7-microcontroller">
<h3>STM32F7 Microcontroller<a class="headerlink" href="#stm32f7-microcontroller" title="Permalink to this headline">¶</a></h3>
<p>STM32F7 microcontroller is used as an interface between the daughter card and an external controller. This MCU has a core ARM 32-bit Cortex M7 CPU. This IC can operate at a supply voltage of 1.7 V to 3.6 V. JTAG / SWD interface is used for debugging and programming the MCU. It has 6 SPIs which is used for daughter card and AMDC isoSPI interfaces. The maximum speed of the MCU SPI interface is 54 Mbps. It has 4 USART with a maximum baud rate of 26 Mbps, which are used to transmit daughter card data to the AMDC. GPIO pins of the MCU can be accessed using GPIO connector. More information on this MCU can be found <a class="reference external" href="https://www.st.com/content/ccc/resource/technical/document/datasheet/group3/c5/37/9c/1d/a6/09/4e/1a/DM00273119/files/DM00273119.pdf/jcr:content/translations/en.DM00273119.pdf">here</a>.</p>
</section>
<section id="differential-io-isolated-transceiver">
<h3>Differential IO Isolated Transceiver<a class="headerlink" href="#differential-io-isolated-transceiver" title="Permalink to this headline">¶</a></h3>
<p>The MCU transmits sensor data via USART communication. These USART signals are converted to differential IO using differential transceiver <a class="reference external" href="https://www.ti.com/lit/ds/symlink/iso3086t.pdf?HQS=TI-null-null-digikeymode-df-pf-null-wwe&amp;ts=1596613093516">ISO3086T</a>. Differential IO has the ability to communicate over long distances and at faster communication rate compared to standard USART. This IC has an in-built isolation barrier. A signaling rate of up to 20 Mbps is obtained from this IC. The operating voltage is provided in the following table.</p>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Conditions</p></th>
<th class="head"><p>MIN</p></th>
<th class="head"><p>MAX</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Supply voltage VCC2 (Bus-side)</p></td>
<td><p></p></td>
<td><p>4.5 V</p></td>
<td><p>5.5 V</p></td>
</tr>
<tr class="row-odd"><td><p>IO supply voltage VCC1 (UART side)</p></td>
<td><p>3.3V operation</p></td>
<td><p>3 V</p></td>
<td><p>3.6 V</p></td>
</tr>
<tr class="row-even"><td><p>IO supply voltage VCC1 (UART side)</p></td>
<td><p>5V operation</p></td>
<td><p>4.5 V</p></td>
<td><p>5 V</p></td>
</tr>
</tbody>
</table></div>
<p>The maximum supply current consumed by the IC including to drive currents for differential lines is 60 mA, which corresponds to 300 mW for 5 V supply.</p>
</section>
<section id="isospi-communication-interface">
<h3>IsoSPI Communication Interface<a class="headerlink" href="#isospi-communication-interface" title="Permalink to this headline">¶</a></h3>
<p>The isoSPI communication interface is implemented using <a class="reference external" href="https://www.analog.com/media/en/technical-documentation/data-sheets/LTC6820.pdf">LTC6820</a>. This IC provides a bi-directional interface between standard SPI signals and differential pulses. The operating conditions are provided in the following table.</p>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Conditions</p></th>
<th class="head"><p>MIN</p></th>
<th class="head"><p>MAX</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Supply voltage VDD (Differential side)</p></td>
<td><p></p></td>
<td><p>2.7 V</p></td>
<td><p>5.5 V</p></td>
</tr>
<tr class="row-odd"><td><p>IO supply voltage VDDS (SPI side)</p></td>
<td><p></p></td>
<td><p>1.7 V</p></td>
<td><p>5.5 V</p></td>
</tr>
<tr class="row-even"><td><p>High-level input voltage</p></td>
<td><p>VDDS = 2.7V to 5V</p></td>
<td><p>0.7 VDDS</p></td>
<td><p>VDDS</p></td>
</tr>
<tr class="row-odd"><td><p>High-level input voltage</p></td>
<td><p>VDDS = 1.7V to 2.7V</p></td>
<td><p>0.8 VDDS</p></td>
<td><p>VDDS</p></td>
</tr>
<tr class="row-even"><td><p>Low-level input voltage</p></td>
<td><p>VDDS = 2.7V to 5V</p></td>
<td><p>0</p></td>
<td><p>0.3 VDDS</p></td>
</tr>
<tr class="row-odd"><td><p>Low-level input voltage</p></td>
<td><p>VDDS = 1.7V to 2.7V</p></td>
<td><p>0</p></td>
<td><p>0.2 VDDS</p></td>
</tr>
</tbody>
</table></div>
<p>This IC can operate at a maximum SPI communication speed of 1 Mbps. The bias resistors (<code class="docutils literal notranslate"><span class="pre">RB1</span></code> and <code class="docutils literal notranslate"><span class="pre">RB2</span></code>) are used to adjust the drive currents to the differential lines. These resistors are selected such that the drive currents are set at 10 mA. These resistors are on the schematic, see the following figure.</p>
<p><img alt="" src="../../../_images/Schematic_RB.png"/></p>
<p>The maximum supply current consumed by the IC including to drive currents for differential lines is 17 mA, which corresponds to 85 mW for 5 V supply.</p>
</section>
<section id="isospi-isolation-transformer">
<h3>IsoSPI Isolation Transformer<a class="headerlink" href="#isospi-isolation-transformer" title="Permalink to this headline">¶</a></h3>
<p>A transformer is required for implementing isoSPI. This will provide an isolation barrier to the differential SPI signals. This is implemented by adding pulse transformer HX1188NLT, which has 1:1 turns ratio. More information on the pulse transformer is found in the <a class="reference external" href="https://media.digikey.com/pdf/Data%20Sheets/Pulse%20PDFs/10_100BASE-T%20Single%20Port%20SMD%20Magnetics_Rev2008.pdf">datasheet</a>.</p>
</section>
</section>
<section id="daugter-card-interface">
<h2>Daugter Card Interface<a class="headerlink" href="#daugter-card-interface" title="Permalink to this headline">¶</a></h2>
<p>In order to design a daugter card, the interface information provided in this section will be useful. Each daughter card slot has two headers, where the daughter card can be plugged in. See the following figure.</p>
<p><img alt="" src="../../../_images/DC_hdr.png"/></p>
<p>One header is used to supply power to the cards and the other header is used for SPI interface.</p>
<section id="header-1-power-supply">
<h3>Header 1: Power Supply<a class="headerlink" href="#header-1-power-supply" title="Permalink to this headline">¶</a></h3>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin number</p></th>
<th class="head"><p>Signal name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>+15V</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>GND</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>-15V</p></td>
</tr>
</tbody>
</table></div>
</section>
<section id="header-2-spi-interface">
<h3>Header 2: SPI interface<a class="headerlink" href="#header-2-spi-interface" title="Permalink to this headline">¶</a></h3>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin number</p></th>
<th class="head"><p>Signal name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>5V</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>3V3</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>GND</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>DIN (ADC IN, MOSI)</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>DOUT (ADC OUT, MISO)</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>SCLK</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>CONVST (Conversion start)</p></td>
</tr>
</tbody>
</table></div>
<p>For information regarding the placement of the headers, refer to the mainboard PCB Altium file in the AMDS repo located: <code class="docutils literal notranslate"><span class="pre">/Mainboard/altium/SensorMotherBoard.PcbDoc</span></code>.</p>
<p>For more information on designing a daughter card, refer the <a class="reference internal" href="../sensor-cards/index.html"><span class="doc std std-doc">sensor card documentation</span></a>.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        

        <div class="related-pages">
          <a class="next-page" href="../sensor-cards/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Sensor Cards</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../firmware/index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Firmware</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Severson Research Group |
            Last updated on Jan 04, 2023. |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../../../_sources/accessories/amds/mainboard/index.md.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-74WCSDC0D0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-74WCSDC0D0');
</script>

<div class="google-analytics-tracking-info">
This page uses <a href="https://analytics.google.com/">Google Analytics</a> to collect statistics. Disable by blocking JavaScript from www.google-analytics.com.
</div>


      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Mainboard</a><ul>
<li><a class="reference internal" href="#relevant-hardware-versions">Relevant Hardware Versions</a></li>
<li><a class="reference internal" href="#application-purpose">Application / Purpose</a></li>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#block-diagram-and-spi-connection-configuration">Block Diagram and SPI Connection Configuration</a></li>
<li><a class="reference internal" href="#external-connections">External Connections</a><ul>
<li><a class="reference internal" href="#db15-connector-1-isospi-and-differential-io">DB15 Connector 1: IsoSPI and Differential IO</a></li>
<li><a class="reference internal" href="#db15-connector-2-gpio">DB15 Connector 2: GPIO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#systems-on-board">Systems on Board</a><ul>
<li><a class="reference internal" href="#stm32f7-microcontroller">STM32F7 Microcontroller</a></li>
<li><a class="reference internal" href="#differential-io-isolated-transceiver">Differential IO Isolated Transceiver</a></li>
<li><a class="reference internal" href="#isospi-communication-interface">IsoSPI Communication Interface</a></li>
<li><a class="reference internal" href="#isospi-isolation-transformer">IsoSPI Isolation Transformer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#daugter-card-interface">Daugter Card Interface</a><ul>
<li><a class="reference internal" href="#header-1-power-supply">Header 1: Power Supply</a></li>
<li><a class="reference internal" href="#header-2-spi-interface">Header 2: SPI interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    </body>
</html>